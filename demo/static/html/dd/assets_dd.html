<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" type="text/css" href="//localhost:8000/static/css/dd/dd.css"/>
<title>Assets Design Document</title>
</head>

<body>
<h1 style="text-align: center">Nature Dairy Farm Inventory Management</h1><p></p>
<h1 style="text-align: center">Assets Design Document</h1><p></p>
<div id="contents" class="contents">
<h2>Contents</h2><p></p><div><ul style="text-align: left">
<h4><li><span>1</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#intro>Introduction</a></span></li>
<li><span>2</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#overview>System Overview</a></span></li>
<li><span>3</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#arch>System Architecture</a></span></li>
<li><span>4</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#component>Component Design</a></span></li>
<li><span>5</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#data>Data Design</a></span></li>
<li><span>6</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#api>API Design</a></span></li>
<li><span>7</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#ui>UI Design</a></span></li>
<li><span>8</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#reqs>Requirements Matrix</a></span></li>
<li><span>9</span>
<span><a href=http://localhost:8000/static/html/dd/assets_dd.html#appendix>Appendix</a></span></li>
</ul></h4></div>

<div id="intro"><h2>1. Introduction</h2><p></p>
<h3>1.1 Purpose</h3><p></p><p>
Nature v1.0 is an inventory management system for the dairy farming market segment.  The Assets feature will consist of a user credential protected UI that interacts with a service that manages all dairy farm assets.
</p><p></p>
<h3>1.2 Scope</h3><p></p><p>
Two tools will be developed.  A CLI tool for rapid creation of new asset objects for load testing and a UI tool for CRUD management of all asset objects.
</p><p>
<h4>1.2.1 Back-end Perspective</h4>
</p><p>
Assets consist of the following objects: Cow, Pasture, Seed, and Milk.  Actions taken on certain assets are healthcheck before milking, milking, planting seed in pastures and allowing pastures to fallow a season using additional objects: HealthRecord, Event, Exercise.
Each Asset is mapped to 1:1 Account objects and either 1:1 User objects or 1:1 User and 1:1 Cow objects.
</p><p>
<h4>1.2.2 Front-end Perspective</h4>
</p><p>
User login by username/password enables access to account mapped objects in all other pages.
Account User login loads a landing page listing current year assets with menu selection of other time periods or access to management of other assets.
</p><p></p>
<h3>1.3 References</h3><p></p><p>
<ul><li><a href=http://localhost:8000/static/html/mrd/mrd.html>Nature Dairy Farm MRD</a></li></ul>
</p><p></div>

<div id="overview" class="left-align"><h2>2. System Overview</h2><p></p>
The assets service is a web service that provides</p><ul>
<li>CRUD operations on Cow objects</li><ul>
<li>purchase a new Cow</li>
<li>look up status for an existing Cow</li>
<li>update status for an existing Cow</li>
<li>sell an existing Cow</li></ul>
<li>CRUD operations on Pasture objects</li><ul>
<li>declare a Pasture as fallow for a season</li>
<li>look up status for an existing Pasture</li>
<li>declare a Pasture as available for grazing for a season</li></ul>
<li>CRUD operations on Seed objects</li><ul>
<li>plant new Seed in a pasture for a season</li></ul>
<li>CRUD operations on HealthRecord objects</li><ul>
<li>log a new HealthRecord for a specific Cow by a specific User</li>
<li>look up HealthRecord status for a specific Cow by a specific User</li>
<li>update an existing HealthRecord for a specific Cow by a specific User</li></ul>
<li>CRUD operations on Exercise objects</li><ul>
<li>log a new Exercise regimen for a specific Cow by a specific User</li>
<li>look up Exercise status for a specific Cow by a specific User</li></ul>
<li>CRUD operations on Event objects</li><ul>
<li>log a new Event for a specific Cow by a specific User</li>
<li>look up Event status for a specific Cow by a specific User</li></ul>
</ul>
</p><p></p></div>

<div id="arch"><h2>3. System Architecture</h2><p></p>
<h3>3.1 Architectural Design</h3><p></p><p>
<img width="750" src="https://www.lucidchart.com/publicSegments/view/033d7d2c-b642-48be-adc6-49e8529dd7c3/image.png"/><p></p>
<h3>3.2 Design Considerations</h3><p></p><p><ul>
<li>PostgreSQL will be the only source of truth providing near-instant data replication with a master-slave configuration</li>
<li>All PostgreSQL table rows will be accessible by key id except Cow table which will reference key rfid, of type UUID</li>
<li>No PostgreSQL table data will ever be deleted but unwanted records will be tagged by date or deleted field to remove from regular search</li>
<li>Commonly requested data will be cached in Redis</li>
<li>Summary reporting will assume low volume same day row creation so table rows will be accessible by keys year, month and id with only the highest id row returned</li>
<li>Because disk space is cheap even when rented and historic data must be preserved for the Summary reporting web service, each table will include a delete column with a boolean value rather than actually deleting a table row</li>
</ul></div>

<div id="component"><h2>4. Component Design</h2><p></p>
<img width="750" src="https://www.lucidchart.com/publicSegments/view/1f51b4b5-f0d7-4e4f-8793-bfb6e4c5de94/image.png"/><p></p></div>

<div id="data"><h2>5. Data Design</h2><p></p>
<h3>5.1 RDBMS Data Description</h3><p></p>
<img width="750" src="https://www.lucidchart.com/publicSegments/view/3249dde1-0cbf-41ef-a0a2-db5ebc9275fa/image.png"/><p></p>
<h3>5.2 Data Integration</h3><p></p><p>
</p><p></p></div>

<div id="api"><h2>6. API Design</h2><p></p>
<table>
  <tr>
    <th>Object</th>
    <th>URL Path</th>
    <th>HTTP Method</th>
    <th>PUT/POST data</th>
    <th>Valid HTTP Response</th>
    <th>Invalid HTTP Response</th>
  </tr>
  <tr>
    <td>Index</td>
    <td>/assets/</td>
    <td><img width="100" src="https://www.lucidchart.com/publicSegments/view/89aff0d8-e622-4f51-b5d2-a21663bd9cb5/image.png"/></td>
    <td></td>
    <td><code>{"status_code": 200, "reason_phrase": "OK"}</code></td>
    <td><code>{"status_code": 405, "reason_phrase": "Unsupport HTTP Method"}</code></td>
  </tr>
  <tr>
    <td>Cow</td>
    <td>/assets/api/cows/</td>
    <td><img width="100" src="https://www.lucidchart.com/publicSegments/view/89aff0d8-e622-4f51-b5d2-a21663bd9cb5/image.png"/></td>
    <td></td>
    <td><code>{"status_code": 200, "reason_phrase": "OK", "content": "[list]"}</code></td>
  </tr>
  <tr>
    <td>Cow</td>
    <td>/assets/api/cows/1/</td>
    <td><img width="100" src="https://www.lucidchart.com/publicSegments/view/89aff0d8-e622-4f51-b5d2-a21663bd9cb5/image.png"/></td>
    <td></td>
    <td><code>{"status_code": 201, "reason_phrase": 'Object Created'}</code></td>
  </tr>
  <tr>
    <td>Cow</td>
    <td>/assets/api/cows/1/</td>
    <td><img width="100" src="https://www.lucidchart.com/publicSegments/view/89aff0d8-e622-4f51-b5d2-a21663bd9cb5/image.png"/></td>
    <td></td>
    <td><code>{"status_code": 200, "reason_phrase": 'OK', "content": "[list]"}</code></td>
  </tr>
  <tr>
    <td>Cow</td>
    <td>/assets/api/cows/</td>
    <td><img width="100" src="https://www.lucidchart.com/publicSegments/view/53747531-9748-4751-9765-6e988c4bcd9b/image.png"/></td>
    <td></td>
    <td><code>{"status_code": 200, "reason_phrase": 'OK', "content": "[list]"}</code></td>
  </tr>
</table>
</div>

<div id="ui"><h2>7. UI Design</h2><p></p>
</p><p></p></div>

<div id="reqs"><h2>8. Requirements Matrix</h2><p></p>
</p><p></p></div>

<div id="appendix"><h2>9. Appendix</h2><p></p>
</p><p></p></div>

</body>
</html>
