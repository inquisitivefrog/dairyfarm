<table class="login" ng-if="globals">
    <tr>
        <td><p style="color:blue">{{globals.currentUser.username}}</p></td>
        <td><p> logged in at </p></td>
        <td><p style="color:blue">{{globals.login}}</p></td>
    </tr>
</table>

<h2>{{globals.currentUser.client.name}} Cow Management</h2>
<form ng-if="cow" action="{% url 'assets:cow-detail' cow.id %}" method="put">
    <table>
        <tr>
            <th>ID:</th>
            <td>{{cow.id}}</td>
        </tr>
        <tr>
            <th>Client:</th>
            <td>{{cow.client.name}}</td>
        </tr>
        <tr>
            <th>Purchaser:</th>
            <td>{{cow.purchased_by}}</td>
        </tr>
        <tr>
            <th>Date:</th>
            <td>{{cow.purchase_date}}</td>
        </tr>
        <tr>
            <th>RFID:</th>
            <td>{{cow.rfid}}</td>
        </tr>
        <tr>
            <th>Breed:</th>
            <td>
                <select ng-init="selectedBreed=globals.breeds[0].name"
                        ng-model="selectedBreed"
                        ng-options="breed.name for breed in globals.breeds">
                </select>
            </td>
        </tr>
        <tr>
            <th>Color:</th>
            <td>
                <select ng-init="selectedColor=globals.colors[0].name"
                        ng-model="selectedColor"
                        ng-options="color.name for color in globals.colors">
                </select>
            </td>
        </tr>
        <tr>
            <th>Age:</th>
            <td>
                <select ng-init="selectedAge=globals.ages[0].name"
                        ng-model="selectedAge"
                        ng-options="age.name for age in globals.ages">
                </select>
            </td>
        </tr>
    </table>
    <input type="button" ng-click="update(selectedBreed, selectedColor, selectedAge)" value="Update"/>
</form>
<form ng-if="cow" action="{% url 'assets:cow-detail' cow.id %} method="delete">
    <table>
        <tr>
            <th>ID:</th>
            <td>{{cow.id}}</td>
        </tr>
        <tr>
            <th>Client:</th>
            <td>{{cow.client.name}}</td>
        </tr>
        <tr>
            <th>Purchaser:</th>
            <td>{{cow.purchased_by}}</td>
        </tr>
        <tr>
            <th>RFID:</th>
            <td>{{cow.rfid}}</td>
        </tr>
        <tr>
            <th>Date Sold:</th>
            <td>{{cow.sell_date != "2100-12-31" ? cow.sell_date : today }}</td>
        </tr>
    </table>
    <input type="button" ng-click="sell()" value="Sell"/>
</form>

<h2>Cow</h2>
<table ng-if="cow">
  <tr>
    <th>ID</th>
    <th>RFID tag</th>
    <th>Client</th>
    <th>Procurer</th>
    <th>Bought When</th>
    <th>Breed</th>
    <th>Color</th>
    <th>Age</th>
    <th>Date Sold</th>
  </tr>
  <tr>
    <td>{{cow.id}}</td>
    <td>{{cow.rfid}}</td>
    <td>{{cow.client.name}}</td>
    <td>{{cow.purchased_by}}</td>
    <td>{{cow.purchase_date}}</td>
    <td>{{cow.breed.name}}</td>
    <td>{{cow.color.name}}</td>
    <td>{{cow.age.name}}</td>
    <td>{{cow.sell_date != "2100-12-31" ? cow.sell_date : "Not Yet" }}</td>
  <tr>
</table>
<p/>
<img src="{{cow.breed.url || ''}}" alt="Image failed to load" height="200" width="400">

